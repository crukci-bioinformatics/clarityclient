<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/apt/serverside.apt at 2021-09-27

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>CRUK-CI Genologics API Client &#x2013; </title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">CRUK-CI Genologics API Client
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2021-09-27</span>
          &#xA0;| <span id="projectVersion">Version: 2.27-SNAPSHOT</span>
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>User Guide</h5>
    <ul>
     <li class="none"><a href="index.html" title="Introduction">Introduction</a></li>
     <li class="none"><a href="installing.html" title="Installation">Installation</a></li>
     <li class="expanded"><a href="usageoverview.html" title="Usage">Usage</a>
      <ul>
       <li class="none"><a href="spring.html" title="Spring Configuration">Spring Configuration</a></li>
       <li class="none"><a href="usage.html" title="Basic Usage">Basic Usage</a></li>
       <li class="none"><a href="caching.html" title="Caching">Caching</a></li>
       <li class="none"><strong>Server Deployment</strong></li>
      </ul></li>
     <li class="none"><a href="issues.html" title="Known Issues">Known Issues</a></li>
     <li class="none"><a href="references.html" title="Reference Documentation">Reference Documentation</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="Using_The_CRUK-CI_Client_Within_A_J2EE_Application_Server"></a>Using The CRUK-CI Client Within A J2EE Application Server</h2>
<p>We have some services and utilities that we have deployed as WAR files within the Genologics JBoss installation (probably against Genologics' guidance). This has been successful, and it helps to keep everything in one place.</p>
<p>Remember if you do deploy into the same JBoss instance as is running Clarity, it won't hot-deploy your code, so you'll need a server restart if you change anything. You certainly won't want it to hot deploy on your production system.</p><section>
<h3><a name="Excluding_provided_dependencies"></a>Excluding provided dependencies</h3>
<p>Some of the third party libraries that the client needs are provided in the shared library areas of JBoss 4.2.3 GA that is deployed with Clarity. You won't want to include these in your WAR file, so they need to be excluded from the dependency on the CRUK-CI client and any that you need to use in your code added to the POM as &quot;<i>provided</i>&quot; libraries.</p>
<p>So, when you add the dependency on the client to your POM, it should look like this:</p>
<div class="source">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;org.cruk.genologics&lt;/groupId&gt;
    &lt;artifactId&gt;clarity-client&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;commons-codec&lt;/groupId&gt;
            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;cglib&lt;/groupId&gt;
            &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;</pre></div></section><section>
<h3><a name="Using_the_cache_in_an_application_server"></a>Using the cache in an application server</h3>
<p>There isn't anything inherently wrong with using the cache in a service deployed in the application server, but if you leave the time objects can remain in the cache too long you're more likely to get stale information back from the client. We've found in practice that the cache is still very useful on the server, but you don't want objects to live in it for much longer than it takes to process individual calls to your service: one or two minutes is fine. Remember that the cache is shared, so multiple independent requests may hit the same objects in the cache when deployed in a server. A stand alone program is not going to have the same interference from different sources.</p>
<p>Take a copy of the <code>org/cruk/genologics/api/ehcache.xml</code> file from the JAR or the source of this project and adapt it to your needs, typically by reducing the <i>timeToLiveSeconds</i> attribute on each of the caches. Put this file in your WAR's resources in the same path, so:</p>
<div class="source">
<pre>WEB-INF/classes/org/cruk/genologics/api/ehcache.xml</pre></div>
<p>This will take precedence over the file in the client JAR.</p></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2013&#x2013;2021<a href="https://www.cruk.cam.ac.uk/">Cancer Research UK Cambridge Institute</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
